<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#000000">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>Recast.mt</title>
<link rel="manifest" href="./manifest.json">
<link rel="stylesheet" href="./style.css">
</head>
<body>

<header id="header">
  <div class="header-title">Recast.mt</div>
  <button class="icon-btn" id="settings-btn" title="settings">⚙</button>
</header>

<main id="main">

  <div id="preset-bar">
    <span class="field-label">preset</span>
    <select id="preset-select">
      <option value="">— no preset —</option>
    </select>
  </div>

  <div id="status-bar">
    <div>chars: <span id="status-chars">0</span></div>
    <div>preset: <span id="status-preset">none</span></div>
    <div>status: <span id="status-state">READY</span></div>
  </div>

  <div class="section">
    <div class="section-label">INPUT</div>
    <textarea
      id="input-text"
      class="input-area"
      placeholder="変換対象テキストを入力"
      autocomplete="off"
      autocorrect="off"
      spellcheck="false"
    ></textarea>
  </div>

  <div class="section">
    <div class="section-label">OUTPUT</div>
    <div id="output-area" class="empty">出力がここに表示される</div>
  </div>

</main>

<div id="bottom-bar">
  <button class="copy-btn" id="copy-btn">copy</button>
  <button class="convert-btn" id="convert-btn">CONVERT</button>
</div>

<!-- SETTINGS MODAL -->
<div class="modal-overlay" id="settings-modal">
  <div class="modal">
    <div class="modal-head">
      SETTINGS
      <button class="modal-close" id="modal-close">✕</button>
    </div>
    <div class="modal-body">

      <!-- API KEYS -->
      <div class="modal-section">
        <div class="modal-section-title">API KEYS</div>
        <div class="field">
          <label>Anthropic API Key</label>
          <input type="password" id="ant-key" placeholder="sk-ant-..." autocomplete="off">
        </div>
        <div class="field">
          <label>OpenAI API Key</label>
          <input type="password" id="oai-key" placeholder="sk-..." autocomplete="off">
        </div>
        <div class="field">
          <label>Gemini API Key</label>
          <input type="password" id="gem-key" placeholder="AIza..." autocomplete="off">
        </div>
        <div class="preset-actions">
          <button class="action-btn primary" id="save-keys-btn">save keys</button>
        </div>
      </div>

      <!-- PRESET EDITOR -->
      <div class="modal-section">
        <div class="modal-section-title">PRESET</div>

        <div class="field">
          <label>load preset</label>
          <select id="settings-preset-select">
            <option value="">— select to load —</option>
            <option value="__new__">— new preset —</option>
          </select>
        </div>

        <div class="field">
          <label>name</label>
          <input type="text" id="preset-name" placeholder="preset name" maxlength="40">
        </div>

        <div class="field-row">
          <div class="field">
            <label>provider</label>
            <select id="preset-provider">
              <option value="anthropic">anthropic</option>
              <option value="openai">openai</option>
              <option value="gemini">gemini</option>
            </select>
          </div>
          <div class="field">
            <label>model</label>
            <select id="preset-model"></select>
          </div>
        </div>

        <div class="field">
          <div class="mode-section-label">transform_mode</div>
          <div class="mode-cat">— structural</div>
          <div class="mode-grid">
            <button class="mode-btn" data-mode="summarize">summarize</button>
            <button class="mode-btn" data-mode="expand">expand</button>
            <button class="mode-btn" data-mode="outline">outline</button>
            <button class="mode-btn active" data-mode="bulletize">bulletize</button>
            <button class="mode-btn" data-mode="compress">compress</button>
            <button class="mode-btn" data-mode="formalize">formalize</button>
            <button class="mode-btn" data-mode="simplify">simplify</button>
            <button class="mode-btn" data-mode="abstract">abstract</button>
          </div>
          <div class="mode-cat">— semantic</div>
          <div class="mode-grid">
            <button class="mode-btn" data-mode="extract_claims">extract_claims</button>
            <button class="mode-btn" data-mode="extract_assumptions">extract_assumptions</button>
            <button class="mode-btn" data-mode="extract_structure">extract_structure</button>
            <button class="mode-btn" data-mode="remove_evaluation">remove_evaluation</button>
            <button class="mode-btn" data-mode="neutralize">neutralize</button>
            <button class="mode-btn" data-mode="invert">invert</button>
          </div>
          <div class="mode-cat">— format</div>
          <div class="mode-grid">
            <button class="mode-btn" data-mode="json">json</button>
            <button class="mode-btn" data-mode="yaml">yaml</button>
            <button class="mode-btn" data-mode="table">table</button>
            <button class="mode-btn" data-mode="pseudo_code">pseudo_code</button>
            <button class="mode-btn" data-mode="markdown">markdown</button>
          </div>
          <div class="mode-cat">— language</div>
          <div class="mode-grid">
            <button class="mode-btn" data-mode="translate">translate</button>
          </div>
          <div class="selected-mode-display">mode: <span id="selected-mode-label">bulletize</span></div>
        </div>

        <div class="field">
          <label>output language</label>
          <select id="preset-language">
            <option value="ja">日本語</option>
            <option value="en">English</option>
          </select>
        </div>

        <div class="field">
          <label>temperature</label>
          <div class="slider-row">
            <input type="range" id="preset-temp" min="0" max="2" step="0.1" value="0.7">
            <span class="slider-val" id="preset-temp-val">0.7</span>
          </div>
        </div>

        <div class="field">
          <label>max_tokens</label>
          <input type="number" id="preset-tokens" min="100" max="8000" value="1000">
        </div>

        <div class="preset-actions">
          <button class="action-btn primary" id="preset-save-new">save new</button>
          <button class="action-btn" id="preset-overwrite" style="display:none">overwrite</button>
          <button class="action-btn danger" id="preset-delete" style="display:none">delete</button>
        </div>
      </div>

    </div>
  </div>
</div>

<script src="./script.js"></script>
</body>
</html>
